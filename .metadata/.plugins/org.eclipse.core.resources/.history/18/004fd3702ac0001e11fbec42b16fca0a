package in.ankit.client;

import org.springframework.stereotype.Service;
import org.springframework.web.reactive.function.client.WebClient;

import in.ankit.binding.Product;

@Service
public class ProductClient {

    public void invokeGETProductClient() {
    	
    	String apiUrl="http://localhost:9090/products";
    	WebClient client = WebClient.create();
    	String block = client.get()
    	           .uri(apiUrl)
    	           .retrieve()
    	           .bodyToMono(String.class)
    	            .block();
    	System.out.println(block);
    }
    
    public void invokePostRequest() {
    	Product product=new Product();
    	product.setProductName("Sakshi");
    	product.setProductPrice(34.5);
    	
    	String apiUrl="http://localhost:9090/product";
    	
    	WebClient client = WebClient.create();
    	String body = client.post().uri(apiUrl).bodyValue(product).retrieve()
    	.bodyToMono(String.class)
    	.block();
    	System.out.println("Body from post request"+client);
    	
    	
    }
    
}
